<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title></title>
    <link rel="stylesheet" type="text/css" href="statics/css/login.css">
</head>

<body>
    <div id="rightContainter">
        <img id="indexPhoto" src="statics/img/indexPhoto.jpg" width="100%">
    </div>
    <div id="upperContainer">
        <img id="charlieLogo" src="statics/icon/Charlie_the_unicorn.png" width="120px">
        <div id="titleForm">
            <form>
                <select id="title">
                    <option value="doctor">Doctor</option>
                    <option value="pharmacist">Pharmacist</option>
                    <option value="staff">Staff</option>
                </select>
            </form>
        </div>
    </div>
    <div id="inputContainer">
        <h3>Log In</h3>
        <form id="loginForm" accept-charset="UTF-8">
            <div style="display: none;"><input type="hidden" name="_method" value="POST"></div>
            <div class="input account required">
                <label for="memAccount">帳號</label>
                <br />
                <input name="account" type="text" id="memAccount" required>
            </div>
            <div class="input password required">
                <label for="memPasswd">密碼</label>
                <br>
                <input name="password" type="password" id="memPasswd" required>
            </div>

            <div class="submit">
                <a href="">忘記密碼</a>
                <input type="button" value="登入" id="submit">
            </div>
        </form>
    </div>
</body>
<script src="//ajax.googleapis.com/ajax/libs/1/jquery.min.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
        //處理表單點擊事件
        var $form = $('#submit');
        $form.click(function() {
            submit();
            window.setInterval(redirect, 100);
        });
        function submit() {
            var account = $('#memAccount').val();
            var password = $('#memPasswd').val();
            var passwordCheck = $('#member_password_check').val();
            if(password != passwordcheck){
                alert("密碼不符！")
            }
            else{
                //將資料組成JSON格式
                var data_object = {
                    "account": account,
                    "password": password
                };

                //將JSON格式轉換成字串
                var data_string = JSON.stringify(data_object);
                //發出POST的AJAX請求
                $.ajax({
                    type: "POST",
                    url: "api/doctor.do",
                    data: data_string,
                    crossDomain: true,
                    cache: false,
                    dataType: 'json',
                    timeout: 5000,
                    success: function (response) {
                        $('#flashMessage').html(response.message);
                        $('#flashMessage').show();
                        if(response.status == 200){
                            updateSQLTable(response.response);
                        }
                    },
                    error: function () {
                        alert("無法連線到伺服器！");
                    }
                });
            }
        }
    })
</script>

</html>